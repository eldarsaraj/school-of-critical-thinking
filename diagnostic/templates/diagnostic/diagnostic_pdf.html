<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Your Syllabus</title>
    <style>
      body { font-family: sans-serif; font-size: 12px; line-height: 1.4; }
      h1 { font-size: 20px; margin: 0 0 12px 0; }
      h2 { font-size: 16px; margin: 18px 0 8px 0; }
      h3 { font-size: 13px; margin: 12px 0 6px 0; }
      .module { border: 1px solid #ddd; padding: 12px; margin: 14px 0; }
      .muted { color: #666; font-size: 11px; }
      ul { margin: 6px 0 10px 18px; padding: 0; }
      li { margin: 4px 0; }
      a { color: inherit; text-decoration: none; }
      hr { border: 0; border-top: 1px solid #eee; margin: 12px 0; }
    </style>
  </head>
  <body>
    <h1>Your Syllabus</h1>

    {% for m in selected_modules %}
      <div class="module">
        <h2>{{ m.title }}</h2>
        {% if m.dimension %}
          <div class="muted">{{ m.dimension }}</div>
        {% endif %}

        {% if m.content_html %}
          <div style="margin-top: 10px;">
            {{ m.content_html|safe }}
          </div>
        {% endif %}

        <hr />
        <h3>Resources</h3>

        {% with r=m.resources %}
          {% if r.core_readings %}
            <strong>Core readings</strong>
            <ul>
              {% for item in r.core_readings %}
                <li>
                  {{ item.title }}{% if item.author %} — {{ item.author }}{% endif %}
                  {% if item.why %}<div class="muted">{{ item.why }}</div>{% endif %}
                </li>
              {% endfor %}
            </ul>
          {% endif %}

          {% if r.supporting %}
            <strong>Supporting</strong>
            <ul>
              {% for item in r.supporting %}
                <li>
                  {{ item.title }}{% if item.author %} — {{ item.author }}{% endif %}
                  {% if item.why %}<div class="muted">{{ item.why }}</div>{% endif %}
                </li>
              {% endfor %}
            </ul>
          {% endif %}

          {% if r.video %}
            <strong>Video</strong>
            <ul>
              {% for item in r.video %}
                <li>
                  {{ item.title }}{% if item.author %} — {{ item.author }}{% endif %}
                  {% if item.why %}<div class="muted">{{ item.why }}</div>{% endif %}
                </li>
              {% endfor %}
            </ul>
          {% endif %}

          {% if r.practice %}
            <strong>Practice</strong>
            <ul>
              {% for item in r.practice %}
                <li>
                  {{ item.title }}{% if item.author %} — {{ item.author }}{% endif %}
                  {% if item.why %}<div class="muted">{{ item.why }}</div>{% endif %}
                </li>
              {% endfor %}
            </ul>
          {% endif %}

          {% if not r.core_readings and not r.supporting and not r.video and not r.practice %}
            <div class="muted"><em>Resources for this module will be added soon.</em></div>
          {% endif %}
        {% endwith %}
      </div>
    {% endfor %}
  </body>
</html>