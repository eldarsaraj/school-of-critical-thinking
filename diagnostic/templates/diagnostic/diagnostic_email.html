{% extends "base.html" %}

{% block title %}Thinking Diagnostic · Results{% endblock %}

{% block content %}
  <h1>You finished the diagnostic.</h1>

  <p class="diagnostic-desc" style="margin: 10px 0 22px 0;">
    Based on your answers, two areas for development have surfaced. Start with the primary one: it’s the highest-leverage fix.
    Then, move on to the secondary one.
  </p>

  {% if preview_modules %}
    <div class="diagnostic-stack">

      {% for m in preview_modules %}

        {% if forloop.first %}
          <div class="diagnostic-card diagnostic-card--primary">

            <p class="diagnostic-kicker">
              Primary constraint
            </p>

            <h2 class="diagnostic-title">
              {{ m.title }}
            </h2>

            <p class="diagnostic-desc" style="margin: 10px 0 0 0;">
              This is the place your reasoning is most likely to fail under pressure.
              Fixing it tends to improve everything downstream.
            </p>

          </div>
        {% else %}
          <div class="diagnostic-card diagnostic-card--secondary">

            <p class="diagnostic-kicker">
              Secondary constraint
            </p>

            <h2 class="diagnostic-title diagnostic-title--secondary">
              {{ m.title }}
            </h2>

            <p class="diagnostic-desc" style="margin: 10px 0 0 0;">
              This one usually hides behind the first. Once you start applying the primary module,
              it becomes obvious (and fixable).
            </p>

          </div>
        {% endif %}

      {% endfor %}
    </div>
  {% endif %}

  <div class="diagnostic-card diagnostic-note">
    <p class="diagnostic-kicker">
      What you’ll receive
    </p>

    <ul class="diagnostic-list">
      <li>A structured syllabus (primary → secondary)</li>
      <li>Curated readings and videos (serious, readable, no pop-science)</li>
      <li>A downloadable PDF you can keep</li>
    </ul>
  </div>

  <p class="diagnostic-desc" style="margin: 18px 0 12px 0;">
    Enter your email to generate the syllabus + PDF.
    You’ll also get a copy sent to you, so you can revisit it later.
    Your name personalizes the document header. Organization helps tailor examples (optional). Email is not used for newsletter subscription or anything of that sort.
  </p>

  <form method="post" action="{% url 'diagnostic_email' %}" class="contact-form">
    {% csrf_token %}

    <div class="contact-form__field">
      <label for="id_full_name">Full name</label>
      <input id="id_full_name" type="text" name="full_name" required autocomplete="name">
    </div>

    <div class="contact-form__field">
      <label for="id_organization">Organization (optional)</label>
      <input id="id_organization" type="text" name="organization" autocomplete="organization">
    </div>

    <div class="contact-form__field">
      <label for="id_email">Email</label>
      <input id="id_email" type="email" name="email" required autocomplete="email">
    </div>

    <div class="contact-form__action">
      <button type="submit">Generate my syllabus →</button>
      <p class="diagnostic-desc" style="margin: 10px 0 0 0; font-size: 12px;">
        No spam. One email with your PDF + syllabus link.
      </p>
    </div>
  </form>

{% endblock %}